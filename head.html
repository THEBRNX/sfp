<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SchoolFeeds Pro - Intelligent Feeding Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 0;
            box-shadow: 5px 0 25px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        .logo {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid var(--light);
            margin-bottom: 20px;
        }

        .logo h2 {
            font-size: 1.8em;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .logo p {
            color: var(--secondary);
            font-size: 0.9em;
        }

        .nav-links {
            list-style: none;
            padding: 0 15px;
        }

        .nav-links li {
            margin: 8px 0;
        }

        .nav-links li a {
            color: var(--secondary);
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-links li a:hover, .nav-links li a.active {
            background: linear-gradient(135deg, var(--primary), #2980b9);
            color: white;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .nav-links li a i {
            margin-right: 15px;
            font-size: 1.2em;
            width: 25px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            background: rgba(248, 249, 250, 0.9);
            overflow-y: auto;
        }

        .header {
            background: white;
            padding: 25px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid var(--primary);
        }

        .header h1 {
            color: var(--secondary);
            font-size: 2.2em;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
        }

        /* Content Sections */
        .content-section {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .content-section.active {
            display: block;
        }

        .section-title {
            color: var(--secondary);
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Dashboard Styles */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), #2980b9);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(45deg);
            transition: all 0.6s ease;
        }

        .stat-card:hover::before {
            transform: rotate(45deg) translate(50px, 50px);
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .stat-card h3 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .stat-card p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .stat-card i {
            font-size: 2em;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: 1px solid #eee;
        }

        .chart-container h3 {
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .data-table th {
            background: linear-gradient(135deg, var(--primary), #2980b9);
            color: white;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .data-table tr:hover {
            background-color: #f8f9fa;
            transition: all 0.2s ease;
        }

        /* Form Styles */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            outline: none;
        }

        .btn {
            background: var(--primary);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn i {
            font-size: 1.1em;
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-info {
            background: var(--info);
        }

        /* Menu Items Grid */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .menu-item {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            background: white;
        }

        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-color: var(--primary);
        }

        .menu-item h4 {
            color: var(--secondary);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .menu-item p {
            margin: 8px 0;
            color: #666;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: var(--danger);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 30px;
            right: 30px;
            padding: 20px 30px;
            background: var(--success);
            color: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            z-index: 3000;
            animation: slideInRight 0.5s ease;
            max-width: 400px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.error {
            background: var(--danger);
        }

        .notification.warning {
            background: var(--warning);
        }

        /* Badges */
        .badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }

        .badge-danger {
            background: var(--danger);
            color: white;
        }

        .badge-info {
            background: var(--info);
            color: white;
        }

        /* Progress Bars */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress {
            height: 100%;
            background: linear-gradient(135deg, var(--success), #229954);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            .main-content {
                padding: 20px;
            }
            .chart-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Search and Filter */
        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-box input {
            padding-left: 45px;
        }

        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #999;
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
        }

        /* Feature Cards */
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            border-left: 4px solid var(--primary);
        }

        .feature-card h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .alert-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid var(--warning);
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        .calendar-day {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .calendar-day:hover {
            border-color: var(--primary);
            background: #f8f9fa;
        }

        .calendar-day.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .inventory-item {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 4px solid var(--success);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            border-left: 4px solid var(--info);
        }

        .nutrition-score {
            font-size: 2em;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            color: var(--success);
        }

        .meal-card {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border-left: 4px solid var(--success);
        }
    </style>
</head>
<body>
    <!-- Notification System -->
    <div class="notification" id="notification"></div>

    <!-- Student Modal -->
    <div id="studentModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="SchoolFeedingSystem.closeModal('studentModal')">&times;</span>
            <h3 style="margin-bottom: 25px;">🎓 Add New Student</h3>
            <form id="studentForm">
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Student Name</label>
                        <input type="text" id="studentName" required placeholder="Enter full name">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-id-card"></i> Student ID</label>
                        <input type="text" id="studentId" required placeholder="Auto-generated" disabled>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-graduation-cap"></i> Grade</label>
                        <select id="studentGrade" required>
                            <option value="">Select Grade</option>
                            <option value="1">Grade 1</option>
                            <option value="2">Grade 2</option>
                            <option value="3">Grade 3</option>
                            <option value="4">Grade 4</option>
                            <option value="5">Grade 5</option>
                            <option value="6">Grade 6</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-users"></i> Class</label>
                        <input type="text" id="studentClass" required placeholder="e.g., 5A">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-heart"></i> Dietary Restrictions</label>
                        <select id="dietaryRestrictions" multiple style="height: 120px;">
                            <option value="None">None</option>
                            <option value="Vegetarian">Vegetarian</option>
                            <option value="Peanut Allergy">Peanut Allergy</option>
                            <option value="Lactose Intolerant">Lactose Intolerant</option>
                            <option value="Gluten Free">Gluten Free</option>
                            <option value="Diabetic">Diabetic</option>
                            <option value="Halal">Halal</option>
                            <option value="Kosher">Kosher</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-utensils"></i> Meal Plan</label>
                        <select id="mealPlan" required>
                            <option value="Standard">Standard</option>
                            <option value="Special">Special Diet</option>
                            <option value="Premium">Premium</option>
                        </select>
                        <label style="margin-top: 15px;"><i class="fas fa-calendar"></i> Enrollment Date</label>
                        <input type="date" id="enrollmentDate" required>
                    </div>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-sticky-note"></i> Additional Notes</label>
                    <textarea id="studentNotes" rows="3" placeholder="Any additional information..."></textarea>
                </div>
                <div style="display: flex; gap: 15px; margin-top: 25px;">
                    <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Save Student</button>
                    <button type="button" class="btn" onclick="SchoolFeedingSystem.closeModal('studentModal')"><i class="fas fa-times"></i> Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">
                <h2>🍎 SchoolFeeds Pro</h2>
                <p>Intelligent Feeding Management</p>
            </div>
            <ul class="nav-links">
                <li><a href="#dashboard" class="nav-link active" data-target="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#students" class="nav-link" data-target="students"><i class="fas fa-user-graduate"></i> Student Management</a></li>
                <li><a href="#menu" class="nav-link" data-target="menu"><i class="fas fa-utensils"></i> Menu Planner</a></li>
                <li><a href="#orders" class="nav-link" data-target="orders"><i class="fas fa-shopping-cart"></i> Order System</a></li>
                <li><a href="#inventory" class="nav-link" data-target="inventory"><i class="fas fa-boxes"></i> Inventory</a></li>
                <li><a href="#reports" class="nav-link" data-target="reports"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                <li><a href="#parentPortal" class="nav-link" data-target="parentPortal"><i class="fas fa-users"></i> Parent Portal</a></li>
                <li><a href="#settings" class="nav-link" data-target="settings"><i class="fas fa-cogs"></i> Settings</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <div class="header">
                <h1>School Feeding Management System</h1>
                <div class="user-info">
                    <div class="user-avatar">AD</div>
                    <div>
                        <div style="font-weight: 600;">Admin User</div>
                        <div style="font-size: 0.9em; color: #666;">Last login: Today, 09:42 AM</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section active">
                <h2 class="section-title">
                    <i class="fas fa-tachometer-alt"></i> Dashboard Overview
                    <span style="font-size: 0.8em; color: #666;">Last updated: <span id="lastUpdated"></span></span>
                </h2>
                
                <div class="stats-grid">
                    <div class="stat-card" onclick="SchoolFeedingSystem.showStudentAnalytics()">
                        <i class="fas fa-user-graduate"></i>
                        <h3 id="totalStudents">1,247</h3>
                        <p>Total Students</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 85%"></div>
                        </div>
                        <small>85% Active this month</small>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);" onclick="SchoolFeedingSystem.showMealAnalytics()">
                        <i class="fas fa-utensils"></i>
                        <h3 id="mealsToday">856</h3>
                        <p>Meals Served Today</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 72%"></div>
                        </div>
                        <small>72% of capacity</small>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #27ae60, #229954);" onclick="SchoolFeedingSystem.showParticipationAnalytics()">
                        <i class="fas fa-chart-line"></i>
                        <h3 id="participationRate">94%</h3>
                        <p>Participation Rate</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 94%"></div>
                        </div>
                        <small>+2% from last week</small>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22);" onclick="SchoolFeedingSystem.showBudgetAnalytics()">
                        <i class="fas fa-dollar-sign"></i>
                        <h3 id="monthlyBudget">$2,847</h3>
                        <p>Monthly Budget</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 65%"></div>
                        </div>
                        <small>65% utilized</small>
                    </div>
                </div>

                <div class="chart-grid">
                    <div class="chart-container">
                        <h3>📈 Weekly Meal Consumption</h3>
                        <canvas id="consumptionChart" height="250"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>🍽️ Meal Distribution</h3>
                        <canvas id="mealDistributionChart" height="250"></canvas>
                    </div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-bell"></i> Recent Activity & Alerts</h3>
                    <div id="recentActivity">
                        <div class="alert-item">
                            <div>
                                <strong>✅ 250 lunches served for Grade 5</strong>
                                <div style="color: #666; font-size: 0.9em;">Today, 12:30 PM</div>
                            </div>
                            <span class="badge badge-success">Completed</span>
                        </div>
                        <div class="alert-item">
                            <div>
                                <strong>⚠️ Low stock alert: Milk (25 units remaining)</strong>
                                <div style="color: #666; font-size: 0.9em;">Today, 10:15 AM</div>
                            </div>
                            <span class="badge badge-warning">Attention</span>
                        </div>
                        <div class="alert-item">
                            <div>
                                <strong>📋 New menu created for next week</strong>
                                <div style="color: #666; font-size: 0.9em;">Yesterday, 3:45 PM</div>
                            </div>
                            <span class="badge badge-info">Update</span>
                        </div>
                    </div>
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h3><i class="fas fa-sync"></i> Quick Actions</h3>
                        <div style="display: grid; gap: 15px; margin-top: 20px;">
                            <button class="btn btn-success" onclick="SchoolFeedingSystem.quickAction('newMenu')">
                                <i class="fas fa-plus"></i> Create New Menu
                            </button>
                            <button class="btn btn-info" onclick="SchoolFeedingSystem.quickAction('generateReport')">
                                <i class="fas fa-file-alt"></i> Generate Report
                            </button>
                            <button class="btn btn-warning" onclick="SchoolFeedingSystem.quickAction('inventoryCheck')">
                                <i class="fas fa-boxes"></i> Check Inventory
                            </button>
                        </div>
                    </div>
                    <div class="feature-card">
                        <h3><i class="fas fa-calendar"></i> Today's Schedule</h3>
                        <div style="margin-top: 15px;">
                            <div class="alert-item">
                                <span>Lunch Service</span>
                                <span class="badge badge-success">11:00 AM - 1:00 PM</span>
                            </div>
                            <div class="alert-item">
                                <span>Inventory Delivery</span>
                                <span class="badge badge-info">2:00 PM</span>
                            </div>
                            <div class="alert-item">
                                <span>Staff Meeting</span>
                                <span class="badge badge-warning">3:30 PM</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Student Management Section -->
            <div id="students" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-user-graduate"></i> Student Management
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.openStudentModal()">
                        <i class="fas fa-user-plus"></i> Add New Student
                    </button>
                </h2>
                
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchStudents" placeholder="Search students by name, grade, or class..." 
                           onkeyup="SchoolFeedingSystem.searchStudents()" style="width: 100%;">
                </div>

                <div class="tabs">
                    <div class="tab active" onclick="SchoolFeedingSystem.switchTab('allStudents')">All Students</div>
                    <div class="tab" onclick="SchoolFeedingSystem.switchTab('activeStudents')">Active</div>
                    <div class="tab" onclick="SchoolFeedingSystem.switchTab('specialDiet')">Special Diet</div>
                    <div class="tab" onclick="SchoolFeedingSystem.switchTab('newEnrollments')">New Enrollments</div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student ID</th>
                                <th>Name</th>
                                <th>Grade</th>
                                <th>Class</th>
                                <th>Dietary Restrictions</th>
                                <th>Meal Plan</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTable">
                            <tr>
                                <td>S001</td>
                                <td>John Smith</td>
                                <td>5</td>
                                <td>5A</td>
                                <td>None</td>
                                <td>Standard</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.editStudent('S001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-danger" onclick="SchoolFeedingSystem.deleteStudent('S001')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>S002</td>
                                <td>Sarah Johnson</td>
                                <td>4</td>
                                <td>4B</td>
                                <td>Peanut Allergy</td>
                                <td>Special</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.editStudent('S002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-danger" onclick="SchoolFeedingSystem.deleteStudent('S002')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 20px;">
                    <div>
                        Showing <span id="showingCount">2</span> of <span id="totalCount">2</span> students
                    </div>
                    <div>
                        <button class="btn" onclick="SchoolFeedingSystem.exportStudents('pdf')">
                            <i class="fas fa-file-pdf"></i> Export PDF
                        </button>
                        <button class="btn btn-success" onclick="SchoolFeedingSystem.exportStudents('excel')">
                            <i class="fas fa-file-excel"></i> Export Excel
                        </button>
                    </div>
                </div>

                <div class="feature-card" style="margin-top: 30px;">
                    <h3><i class="fas fa-chart-pie"></i> Student Statistics</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Total Students by Grade</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Grade 1: 210 | Grade 2: 195 | Grade 3: 208 | Grade 4: 215 | Grade 5: 219 | Grade 6: 200
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Meal Plan Distribution</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Standard: 85% | Special Diet: 12% | Premium: 3%
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Menu Planner Section -->
            <div id="menu" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-utensils"></i> Menu Planner
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.createNewMenu()">
                        <i class="fas fa-plus"></i> Create New Menu
                    </button>
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-calendar"></i> Week Starting</label>
                        <input type="date" id="weekSelector" onchange="SchoolFeedingSystem.loadMenuForWeek()">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-filter"></i> Filter by Category</label>
                        <select id="menuCategory" onchange="SchoolFeedingSystem.filterMenu()">
                            <option value="all">All Categories</option>
                            <option value="vegetarian">Vegetarian</option>
                            <option value="non-vegetarian">Non-Vegetarian</option>
                            <option value="special">Special Diet</option>
                        </select>
                    </div>
                </div>

                <div class="menu-grid">
                    <div class="menu-item">
                        <h4>Monday</h4>
                        <p><strong>Lunch:</strong> Spaghetti with Meatballs</p>
                        <p><strong>Side:</strong> Garden Salad</p>
                        <p><strong>Drink:</strong> Apple Juice</p>
                        <p><strong>Nutrition Score:</strong> <span class="badge badge-success">92%</span></p>
                        <button class="btn" onclick="SchoolFeedingSystem.editMenuDay('monday')" style="margin-top: 10px;">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                    <div class="menu-item">
                        <h4>Tuesday</h4>
                        <p><strong>Lunch:</strong> Grilled Chicken Sandwich</p>
                        <p><strong>Side:</strong> Sweet Potato Fries</p>
                        <p><strong>Drink:</strong> Milk</p>
                        <p><strong>Nutrition Score:</strong> <span class="badge badge-success">88%</span></p>
                        <button class="btn" onclick="SchoolFeedingSystem.editMenuDay('tuesday')" style="margin-top: 10px;">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                    <div class="menu-item">
                        <h4>Wednesday</h4>
                        <p><strong>Lunch:</strong> Vegetable Stir Fry</p>
                        <p><strong>Side:</strong> Steamed Rice</p>
                        <p><strong>Drink:</strong> Orange Juice</p>
                        <p><strong>Nutrition Score:</strong> <span class="badge badge-success">95%</span></p>
                        <button class="btn" onclick="SchoolFeedingSystem.editMenuDay('wednesday')" style="margin-top: 10px;">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                    </div>
                </div>

                <div class="feature-card" style="margin-top: 30px;">
                    <h3><i class="fas fa-chart-bar"></i> Menu Analytics</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Most Popular Meals This Week</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                1. Spaghetti (245 orders)<br>
                                2. Grilled Chicken (218 orders)<br>
                                3. Vegetable Stir Fry (195 orders)
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Nutrition Overview</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Average Score: 91%<br>
                                Protein: 85% | Carbs: 78% | Veggies: 92%
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 25px;">
                    <button class="btn" onclick="SchoolFeedingSystem.printMenu()">
                        <i class="fas fa-print"></i> Print Menu
                    </button>
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.copyMenuToNextWeek()">
                        <i class="fas fa-copy"></i> Copy to Next Week
                    </button>
                    <button class="btn btn-info" onclick="SchoolFeedingSystem.generateShoppingList()">
                        <i class="fas fa-shopping-cart"></i> Shopping List
                    </button>
                </div>
            </div>

            <!-- Order System Section -->
            <div id="orders" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-shopping-cart"></i> Order System
                    <div>
                        <button class="btn btn-warning" onclick="SchoolFeedingSystem.syncOrders()">
                            <i class="fas fa-sync"></i> Sync Orders
                        </button>
                        <button class="btn btn-success" onclick="SchoolFeedingSystem.processAllOrders()">
                            <i class="fas fa-bolt"></i> Process All
                        </button>
                    </div>
                </h2>
                
                <div class="stats-grid">
                    <div class="stat-card" onclick="SchoolFeedingSystem.filterOrders('today')">
                        <i class="fas fa-shopping-cart"></i>
                        <h3 id="todayOrders">856</h3>
                        <p>Today's Orders</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22);" onclick="SchoolFeedingSystem.filterOrders('pending')">
                        <i class="fas fa-clock"></i>
                        <h3 id="pendingOrders">124</h3>
                        <p>Pending Orders</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #27ae60, #229954);" onclick="SchoolFeedingSystem.filterOrders('completed')">
                        <i class="fas fa-check-circle"></i>
                        <h3 id="completedOrders">732</h3>
                        <p>Completed Orders</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);" onclick="SchoolFeedingSystem.filterOrders('accuracy')">
                        <i class="fas fa-chart-line"></i>
                        <h3 id="orderAccuracy">98%</h3>
                        <p>Order Accuracy</p>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Student</th>
                                <th>Meal</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Special Requests</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTable">
                            <tr>
                                <td>ORD001</td>
                                <td>John Smith</td>
                                <td>Standard Lunch</td>
                                <td>2024-01-15</td>
                                <td><span class="badge badge-success">Completed</span></td>
                                <td>None</td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.viewOrder('ORD001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-danger" onclick="SchoolFeedingSystem.cancelOrder('ORD001')">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>ORD002</td>
                                <td>Sarah Johnson</td>
                                <td>Special Diet Lunch</td>
                                <td>2024-01-15</td>
                                <td><span class="badge badge-warning">Preparing</span></td>
                                <td>No peanuts</td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.viewOrder('ORD002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-success" onclick="SchoolFeedingSystem.completeOrder('ORD002')">
                                        <i class="fas fa-check"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="feature-card" style="margin-top: 30px;">
                    <h3><i class="fas fa-chart-line"></i> Order Analytics</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Daily Order Trends</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Monday: 820 orders<br>
                                Tuesday: 785 orders<br>
                                Wednesday: 856 orders<br>
                                Thursday: 812 orders<br>
                                Friday: 799 orders
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Popular Order Times</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                11:00 AM: 45%<br>
                                11:30 AM: 35%<br>
                                12:00 PM: 15%<br>
                                12:30 PM: 5%
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory Section -->
            <div id="inventory" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-boxes"></i> Inventory Management
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.addInventoryItem()">
                        <i class="fas fa-plus"></i> Add New Item
                    </button>
                </h2>
                
                <div class="stats-grid">
                    <div class="stat-card" style="background: linear-gradient(135deg, #27ae60, #229954);" onclick="SchoolFeedingSystem.filterInventory('in-stock')">
                        <i class="fas fa-box"></i>
                        <h3 id="inStockItems">45</h3>
                        <p>Items in Stock</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #e74c3c, #c0392b);" onclick="SchoolFeedingSystem.filterInventory('low-stock')">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3 id="lowStockItems">8</h3>
                        <p>Low Stock Items</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22);" onclick="SchoolFeedingSystem.filterInventory('out-of-stock')">
                        <i class="fas fa-times-circle"></i>
                        <h3 id="outOfStockItems">3</h3>
                        <p>Out of Stock</p>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);" onclick="SchoolFeedingSystem.filterInventory('expiring')">
                        <i class="fas fa-clock"></i>
                        <h3 id="expiringItems">12</h3>
                        <p>Expiring Soon</p>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Item ID</th>
                                <th>Item Name</th>
                                <th>Category</th>
                                <th>Current Stock</th>
                                <th>Min Stock</th>
                                <th>Unit Price</th>
                                <th>Status</th>
                                <th>Expiry Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTable">
                            <tr>
                                <td>INV001</td>
                                <td>Milk</td>
                                <td>Dairy</td>
                                <td>25</td>
                                <td>30</td>
                                <td>$2.50</td>
                                <td><span class="badge badge-warning">Low Stock</span></td>
                                <td>2024-02-01</td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.updateStock('INV001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-success" onclick="SchoolFeedingSystem.reorderItem('INV001')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>INV002</td>
                                <td>Rice</td>
                                <td>Grains</td>
                                <td>150</td>
                                <td>50</td>
                                <td>$1.20</td>
                                <td><span class="badge badge-success">In Stock</span></td>
                                <td>2024-12-01</td>
                                <td>
                                    <button class="btn" onclick="SchoolFeedingSystem.updateStock('INV002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-success" onclick="SchoolFeedingSystem.reorderItem('INV002')">
                                        <i class="fas fa-shopping-cart"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="feature-card" style="margin-top: 30px;">
                    <h3><i class="fas fa-chart-line"></i> Inventory Analytics</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Fastest Moving Items</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                1. Milk (45 units/week)<br>
                                2. Bread (38 units/week)<br>
                                3. Chicken (32 units/week)
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Inventory Value</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Total Value: $4,250<br>
                                Monthly Usage: $3,800<br>
                                Turnover Rate: 3.2 weeks
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-chart-bar"></i> Analytics & Reports
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.generateComprehensiveReport()">
                        <i class="fas fa-file-alt"></i> Generate Full Report
                    </button>
                </h2>
                
                <div class="form-row">
                    <div class="form-group">
                        <label><i class="fas fa-calendar"></i> Report Period</label>
                        <select id="reportPeriod" onchange="SchoolFeedingSystem.generateReport()">
                            <option value="today">Today</option>
                            <option value="week" selected>This Week</option>
                            <option value="month">This Month</option>
                            <option value="quarter">This Quarter</option>
                            <option value="year">This Year</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-chart-bar"></i> Report Type</label>
                        <select id="reportType" onchange="SchoolFeedingSystem.generateReport()">
                            <option value="overview">Overview</option>
                            <option value="financial">Financial</option>
                            <option value="consumption">Consumption</option>
                            <option value="inventory">Inventory</option>
                            <option value="student">Student Participation</option>
                        </select>
                    </div>
                </div>

                <div class="chart-grid">
                    <div class="chart-container">
                        <h3>📊 Monthly Meal Consumption</h3>
                        <canvas id="monthlyConsumptionChart" height="300"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>💰 Financial Summary</h3>
                        <canvas id="financialChart" height="300"></canvas>
                    </div>
                </div>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h3><i class="fas fa-user-graduate"></i> Student Participation</h3>
                        <div class="nutrition-score">94%</div>
                        <p>Overall Participation Rate</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 94%"></div>
                        </div>
                        <small>+2% from last month</small>
                    </div>
                    <div class="feature-card">
                        <h3><i class="fas fa-utensils"></i> Meal Quality</h3>
                        <div class="nutrition-score">91%</div>
                        <p>Average Nutrition Score</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 91%"></div>
                        </div>
                        <small>Based on 1,200 meals</small>
                    </div>
                    <div class="feature-card">
                        <h3><i class="fas fa-dollar-sign"></i> Cost Efficiency</h3>
                        <div class="nutrition-score">88%</div>
                        <p>Budget Utilization</p>
                        <div class="progress-bar">
                            <div class="progress" style="width: 88%"></div>
                        </div>
                        <small>$2,847 of $3,200 budget</small>
                    </div>
                </div>
            </div>

            <!-- Parent Portal Section -->
            <div id="parentPortal" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-users"></i> Parent Portal
                    <button class="btn btn-info" onclick="SchoolFeedingSystem.showQRCode()">
                        <i class="fas fa-qrcode"></i> Generate QR Code
                    </button>
                </h2>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h3><i class="fas fa-mobile-alt"></i> Mobile Access</h3>
                        <p>Parents can access the portal via mobile app or web browser</p>
                        <div style="text-align: center; margin: 20px 0;">
                            <div style="font-size: 3em;">📱</div>
                            <div>Mobile App Available</div>
                        </div>
                        <button class="btn" style="width: 100%;">
                            <i class="fas fa-download"></i> Download Mobile App
                        </button>
                    </div>

                    <div class="feature-card">
                        <h3><i class="fas fa-utensils"></i> Today's Menu</h3>
                        <div class="meal-card">
                            <h4>Wednesday, January 15</h4>
                            <p><strong>Lunch:</strong> Vegetable Stir Fry with Rice</p>
                            <p><strong>Side:</strong> Fresh Fruit Salad</p>
                            <p><strong>Drink:</strong> Orange Juice</p>
                            <p><strong>Nutrition Score:</strong> <span class="badge badge-success">95%</span></p>
                        </div>
                        <button class="btn btn-success" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-utensils"></i> View Weekly Menu
                        </button>
                    </div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-shopping-cart"></i> Meal Orders</h3>
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 2em; font-weight: bold;">12</div>
                        <div>Meals Ordered This Week</div>
                    </div>
                    <button class="btn btn-success" style="width: 100%;">
                        <i class="fas fa-plus"></i> Order Meals
                    </button>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-comment-dollar"></i> Payment History</h3>
                    <div class="alert-item">
                        <div>
                            <strong>January 15, 2024</strong><br>
                            <small>5 meals - $25.00</small>
                        </div>
                        <span class="badge badge-success">Paid</span>
                    </div>
                    <div class="alert-item">
                        <div>
                            <strong>January 8, 2024</strong><br>
                            <small>5 meals - $25.00</small>
                        </div>
                        <span class="badge badge-success">Paid</span>
                    </div>
                    <button class="btn" style="width: 100%; margin-top: 15px;">
                        <i class="fas fa-credit-card"></i> Make Payment
                    </button>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="content-section">
                <h2 class="section-title">
                    <i class="fas fa-cogs"></i> System Settings
                </h2>

                <div class="feature-card">
                    <h3><i class="fas fa-school"></i> School Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>School Name</label>
                            <input type="text" class="form-control" value="Greenwood Elementary School">
                        </div>
                        <div class="form-group">
                            <label>Meal Service Time</label>
                            <input type="time" class="form-control" value="11:00">
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-bell"></i> Notification Settings</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Low Stock Threshold</label>
                            <input type="number" class="form-control" value="10">
                        </div>
                        <div class="form-group">
                            <label>Auto-report Schedule</label>
                            <select class="form-control">
                                <option value="daily">Daily</option>
                                <option value="weekly" selected>Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="feature-card">
                    <h3><i class="fas fa-shield-alt"></i> Security & Access</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>User Roles</label>
                            <select class="form-control" multiple style="height: 120px;">
                                <option selected>Administrator</option>
                                <option selected>Kitchen Staff</option>
                                <option selected>Teacher</option>
                                <option>Parent</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Data Backup</label>
                            <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                                Last Backup: Today, 02:00 AM<br>
                                Next Backup: Tomorrow, 02:00 AM
                            </div>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 25px;">
                    <button class="btn btn-success" onclick="SchoolFeedingSystem.saveSettings()">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                    <button class="btn btn-warning" onclick="SchoolFeedingSystem.resetSettings()">
                        <i class="fas fa-redo"></i> Reset to Default
                    </button>
                    <button class="btn btn-info" onclick="SchoolFeedingSystem.backupData()">
                        <i class="fas fa-database"></i> Backup Data
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // School Feeding Management System
        class SchoolFeedingSystem {
            constructor() {
                this.students = JSON.parse(localStorage.getItem('students')) || this.getDefaultStudents();
                this.orders = JSON.parse(localStorage.getItem('orders')) || this.getDefaultOrders();
                this.inventory = JSON.parse(localStorage.getItem('inventory')) || this.getDefaultInventory();
                this.menu = JSON.parse(localStorage.getItem('menu')) || this.getDefaultMenu();
                this.settings = JSON.parse(localStorage.getItem('settings')) || this.getDefaultSettings();
                this.currentTab = 'allStudents';
                this.charts = {};
                this.init();
            }

            getDefaultStudents() {
                return [
                    { id: 'S001', name: 'John Smith', grade: 5, class: '5A', dietary: 'None', plan: 'Standard', status: 'Active', enrollmentDate: '2024-01-10' },
                    { id: 'S002', name: 'Sarah Johnson', grade: 4, class: '4B', dietary: 'Peanut Allergy', plan: 'Special', status: 'Active', enrollmentDate: '2024-01-12' }
                ];
            }

            getDefaultOrders() {
                return [
                    { id: 'ORD001', student: 'John Smith', meal: 'Standard Lunch', date: '2024-01-15', status: 'Completed', specialRequests: 'None' },
                    { id: 'ORD002', student: 'Sarah Johnson', meal: 'Special Diet Lunch', date: '2024-01-15', status: 'Preparing', specialRequests: 'No peanuts' }
                ];
            }

            getDefaultInventory() {
                return [
                    { id: 'INV001', name: 'Milk', category: 'Dairy', stock: 25, minStock: 30, price: 2.50, status: 'Low Stock', expiryDate: '2024-02-01' },
                    { id: 'INV002', name: 'Rice', category: 'Grains', stock: 150, minStock: 50, price: 1.20, status: 'In Stock', expiryDate: '2024-12-01' }
                ];
            }

            getDefaultMenu() {
                return {
                    '2024-01-15': {
                        monday: { lunch: 'Spaghetti with Meatballs', side: 'Garden Salad', drink: 'Apple Juice' },
                        tuesday: { lunch: 'Grilled Chicken Sandwich', side: 'Sweet Potato Fries', drink: 'Milk' },
                        wednesday: { lunch: 'Vegetable Stir Fry', side: 'Steamed Rice', drink: 'Orange Juice' }
                    }
                };
            }

            getDefaultSettings() {
                return {
                    schoolName: 'Greenwood Elementary School',
                    mealServiceTime: '11:00',
                    lowStockThreshold: 10,
                    autoReportSchedule: 'weekly'
                };
            }

            init() {
                this.setupEventListeners();
                this.loadInitialData();
                this.updateDashboard();
                this.setupRealTimeUpdates();
                this.initializeCharts();
            }

            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.navigateToSection(link.dataset.target);
                    });
                });

                // Form submissions
                document.getElementById('studentForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addStudent();
                });

                // Close modals when clicking outside
                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        e.target.style.display = 'none';
                    }
                });

                // Initialize date selector
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('weekSelector').value = today;
            }

            navigateToSection(section) {
                // Update navigation
                document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
                
                document.querySelector(`[data-target="${section}"]`).classList.add('active');
                document.getElementById(section).classList.add('active');

                this.showNotification(`Navigated to ${section.replace(/([A-Z])/g, ' $1').trim()}`, 'info');
            }

            loadInitialData() {
                this.updateStudentCounts();
                this.updateOrderStats();
                this.updateInventoryStats();
            }

            updateDashboard() {
                document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
            }

            initializeCharts() {
                // Consumption Chart
                const consumptionCtx = document.getElementById('consumptionChart').getContext('2d');
                this.charts.consumption = new Chart(consumptionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Meals Served',
                            data: [650, 720, 680, 810, 790, 0, 0],
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });

                // Meal Distribution Chart
                const distributionCtx = document.getElementById('mealDistributionChart').getContext('2d');
                this.charts.distribution = new Chart(distributionCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Standard', 'Vegetarian', 'Special Diet', 'Premium'],
                        datasets: [{
                            data: [65, 20, 10, 5],
                            backgroundColor: [
                                '#3498db',
                                '#27ae60',
                                '#e74c3c',
                                '#f39c12'
                            ]
                        }]
                    }
                });

                // Monthly Consumption Chart
                const monthlyCtx = document.getElementById('monthlyConsumptionChart').getContext('2d');
                this.charts.monthly = new Chart(monthlyCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Meals Served',
                            data: [12000, 19000, 15000, 18000, 22000, 19500],
                            backgroundColor: '#3498db'
                        }]
                    }
                });

                // Financial Chart
                const financialCtx = document.getElementById('financialChart').getContext('2d');
                this.charts.financial = new Chart(financialCtx, {
                    type: 'pie',
                    data: {
                        labels: ['Food', 'Staff', 'Utilities', 'Equipment', 'Other'],
                        datasets: [{
                            data: [45, 25, 15, 10, 5],
                            backgroundColor: [
                                '#3498db',
                                '#27ae60',
                                '#e74c3c',
                                '#f39c12',
                                '#9b59b6'
                            ]
                        }]
                    }
                });
            }

            // Student Management Functions
            addStudent() {
                const student = {
                    id: 'S' + Math.random().toString().substr(2, 4),
                    name: document.getElementById('studentName').value,
                    grade: document.getElementById('studentGrade').value,
                    class: document.getElementById('studentClass').value,
                    dietary: Array.from(document.getElementById('dietaryRestrictions').selectedOptions)
                                .map(opt => opt.value).join(', '),
                    plan: document.getElementById('mealPlan').value,
                    status: 'Active',
                    enrollmentDate: document.getElementById('enrollmentDate').value,
                    notes: document.getElementById('studentNotes').value
                };

                this.students.push(student);
                this.saveData();
                this.updateStudentCounts();
                this.closeModal('studentModal');
                this.showNotification(`Student ${student.name} added successfully!`, 'success');
                
                // Reset form
                document.getElementById('studentForm').reset();
                document.getElementById('studentId').value = 'S' + Math.random().toString().substr(2, 4);
            }

            updateStudentCounts() {
                document.getElementById('totalStudents').textContent = this.students.length;
                document.getElementById('showingCount').textContent = this.students.length;
                document.getElementById('totalCount').textContent = this.students.length;
            }

            // Order Management Functions
            updateOrderStats() {
                const totalOrders = this.orders.length;
                const completedOrders = this.orders.filter(o => o.status === 'Completed').length;
                const pendingOrders = this.orders.filter(o => o.status === 'Pending').length;
                
                document.getElementById('todayOrders').textContent = totalOrders;
                document.getElementById('pendingOrders').textContent = pendingOrders;
                document.getElementById('completedOrders').textContent = completedOrders;
                document.getElementById('orderAccuracy').textContent = totalOrders > 0 ? 
                    Math.round((completedOrders / totalOrders) * 100) + '%' : '100%';
            }

            // Inventory Management Functions
            updateInventoryStats() {
                const inStockItems = this.inventory.filter(i => i.status === 'In Stock').length;
                const lowStockItems = this.inventory.filter(i => i.status === 'Low Stock').length;
                const outOfStockItems = this.inventory.filter(i => i.status === 'Out of Stock').length;
                const expiringItems = this.inventory.filter(i => {
                    const expiryDate = new Date(i.expiryDate);
                    const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000);
                    return expiryDate < nextWeek;
                }).length;

                document.getElementById('inStockItems').textContent = inStockItems;
                document.getElementById('lowStockItems').textContent = lowStockItems;
                document.getElementById('outOfStockItems').textContent = outOfStockItems;
                document.getElementById('expiringItems').textContent = expiringItems;
            }

            // Utility Functions
            showNotification(message, type = 'success', duration = 5000) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.className = `notification ${type}`;
                notification.style.display = 'block';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, duration);
            }

            closeModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            }

            openModal(modalId) {
                document.getElementById(modalId).style.display = 'block';
            }

            saveData() {
                localStorage.setItem('students', JSON.stringify(this.students));
                localStorage.setItem('orders', JSON.stringify(this.orders));
                localStorage.setItem('inventory', JSON.stringify(this.inventory));
                localStorage.setItem('menu', JSON.stringify(this.menu));
                localStorage.setItem('settings', JSON.stringify(this.settings));
            }

            setupRealTimeUpdates() {
                setInterval(() => {
                    this.updateDashboard();
                }, 30000);
            }

            // Public Methods for UI Interactions
            static openStudentModal() {
                SchoolFeedingSystem.instance.openModal('studentModal');
                document.getElementById('studentId').value = 'S' + Math.random().toString().substr(2, 4);
            }

            static closeModal(modalId) {
                SchoolFeedingSystem.instance.closeModal(modalId);
            }

            static switchTab(tabName) {
                SchoolFeedingSystem.instance.currentTab = tabName;
                document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
                event.target.classList.add('active');
                SchoolFeedingSystem.instance.showNotification(`Switched to ${tabName} view`, 'info');
            }

            static searchStudents() {
                const query = document.getElementById('searchStudents').value;
                SchoolFeedingSystem.instance.showNotification(`Searching for: ${query}`, 'info');
            }

            static editStudent(studentId) {
                SchoolFeedingSystem.instance.showNotification(`Editing student: ${studentId}`, 'info');
            }

            static deleteStudent(studentId) {
                if (confirm(`Are you sure you want to delete student ${studentId}?`)) {
                    SchoolFeedingSystem.instance.showNotification(`Student ${studentId} deleted`, 'success');
                }
            }

            static viewOrder(orderId) {
                SchoolFeedingSystem.instance.showNotification(`Viewing order: ${orderId}`, 'info');
            }

            static completeOrder(orderId) {
                SchoolFeedingSystem.instance.showNotification(`Order ${orderId} completed`, 'success');
            }

            static cancelOrder(orderId) {
                if (confirm(`Cancel order ${orderId}?`)) {
                    SchoolFeedingSystem.instance.showNotification(`Order ${orderId} cancelled`, 'success');
                }
            }

            static updateStock(itemId) {
                SchoolFeedingSystem.instance.showNotification(`Updating stock for: ${itemId}`, 'info');
            }

            static reorderItem(itemId) {
                SchoolFeedingSystem.instance.showNotification(`Reorder requested for: ${itemId}`, 'info');
            }

            static showStudentAnalytics() {
                SchoolFeedingSystem.instance.showNotification('Opening student analytics...', 'info');
            }

            static showMealAnalytics() {
                SchoolFeedingSystem.instance.showNotification('Opening meal analytics...', 'info');
            }

            static showParticipationAnalytics() {
                SchoolFeedingSystem.instance.showNotification('Opening participation analytics...', 'info');
            }

            static showBudgetAnalytics() {
                SchoolFeedingSystem.instance.showNotification('Opening budget analytics...', 'info');
            }

            static quickAction(action) {
                const actions = {
                    'newMenu': () => SchoolFeedingSystem.instance.showNotification('Opening menu creation form...', 'info'),
                    'generateReport': () => SchoolFeedingSystem.generatePDFReport(),
                    'inventoryCheck': () => SchoolFeedingSystem.instance.showNotification('Running inventory check...', 'info'),
                    'studentRegistration': () => SchoolFeedingSystem.openStudentModal()
                };
                
                if (actions[action]) {
                    actions[action]();
                }
            }

            static exportStudents(format) {
                SchoolFeedingSystem.instance.showNotification(`Exporting students data in ${format.toUpperCase()} format...`, 'info');
            }

            static createNewMenu() {
                SchoolFeedingSystem.instance.showNotification('Creating new menu...', 'info');
            }

            static loadMenuForWeek() {
                SchoolFeedingSystem.instance.showNotification('Loading menu for selected week...', 'info');
            }

            static filterMenu() {
                SchoolFeedingSystem.instance.showNotification('Filtering menu...', 'info');
            }

            static editMenuDay(day) {
                SchoolFeedingSystem.instance.showNotification(`Editing menu for ${day}...`, 'info');
            }

            static printMenu() {
                SchoolFeedingSystem.instance.showNotification('Printing menu...', 'info');
            }

            static copyMenuToNextWeek() {
                SchoolFeedingSystem.instance.showNotification('Copying menu to next week...', 'info');
            }

            static generateShoppingList() {
                SchoolFeedingSystem.instance.showNotification('Generating shopping list...', 'info');
            }

            static syncOrders() {
                SchoolFeedingSystem.instance.showNotification('Syncing orders...', 'info');
            }

            static processAllOrders() {
                SchoolFeedingSystem.instance.showNotification('Processing all orders...', 'info');
            }

            static filterOrders(filter) {
                SchoolFeedingSystem.instance.showNotification(`Filtering orders by: ${filter}`, 'info');
            }

            static addInventoryItem() {
                SchoolFeedingSystem.instance.showNotification('Adding new inventory item...', 'info');
            }

            static filterInventory(filter) {
                SchoolFeedingSystem.instance.showNotification(`Filtering inventory by: ${filter}`, 'info');
            }

            static generateReport() {
                SchoolFeedingSystem.instance.showNotification('Generating report...', 'info');
            }

            static generatePDFReport() {
                SchoolFeedingSystem.instance.showNotification('Generating PDF report...', 'info');
            }

            static generateComprehensiveReport() {
                SchoolFeedingSystem.instance.showNotification('Generating comprehensive report...', 'info');
            }

            static showQRCode() {
                SchoolFeedingSystem.instance.showNotification('Generating QR code...', 'info');
            }

            static saveSettings() {
                SchoolFeedingSystem.instance.showNotification('Settings saved successfully', 'success');
            }

            static resetSettings() {
                if (confirm('Reset all settings to default?')) {
                    SchoolFeedingSystem.instance.showNotification('Settings reset to default', 'success');
                }
            }

            static backupData() {
                SchoolFeedingSystem.instance.showNotification('Data backup completed', 'success');
            }
        }

        // Initialize the system
        document.addEventListener('DOMContentLoaded', function() {
            SchoolFeedingSystem.instance = new SchoolFeedingSystem();
        });
    </script>
</body>
</html>